# <img src="frontend/public/Stealthflow_logo.png" width="30"> StealthFlow

**Privacy is a Right, Not a Feature.**

StealthFlow is a **Non-Interactive Stealth Address Protocol** built on **Starknet**. It enables users to receive funds privately without ever revealing their identity on-chain.

By leveraging **Starknet's native Account Abstraction**, **Garaga** for efficient on-chain elliptic curve operations, and an **Atomic Paymaster** architecture, StealthFlow breaks the link between sender and receiver while solving the "dust" problem of privacy tools.

---

## ğŸš€ Key Features

### ğŸ›¡ï¸ Non-Interactive Stealth Addresses

Receive payments without interacting with the sender. The sender generates a unique, one-time address based on your "Stealth Meta-Address".

* **Unlinkable:** Observers cannot link the stealth address to your main wallet.
* **Sovereign:** Only *you* possess the private key derived from your meta-address to spend these funds.

### â›½ Atomic Gasless Claims

We solved the "Zero-Funding Problem." Usually, a fresh stealth address has no ETH/STRK to pay for gas, and funding it from your main wallet de-anonymizes you.

* **Paymaster Integration:** StealthFlow allows a Relayer to pay the gas fees.
* **Atomic Swap:** The contract verifies the owner's signature and atomically refunds the Relayer in the same transaction using the funds being claimed.
* **Garaga Powered:** We use **Garaga** to efficiently verify `secp256k1` signatures on Starknet, enabling compatibility with standard cryptographic curves.

### ğŸ•µï¸ Client-Side Privacy Scanning

Your privacy is preserved by keeping the scanning logic entirely on your device.

* **1-Byte View Tags:** Our protocol emits a lightweight announcement tag. The client filters out >99% of irrelevant transactions instantly without performing expensive cryptography, making scanning lighting fast.

---

## ğŸ§ª Hackathon Demo: Manual CLI Mode

**Note for Judges:**
For this hackathon demonstration, the automated Relayer is set to **Developer Mode** to allow you to inspect the claim mechanics transparently. You can execute the gasless claim using our CLI tool.

### 1. Setup Local Environment
You need Python 3.10+ and Rust installed.

```bash
# Install dependencies
pip install starknet-py==0.23.0 garaga==1.0.1 poseidon-py==0.1.4 python-dotenv

```

### 2. Configure Sponsor (Gas Payer)

Export the credentials of any Starknet Sepolia wallet with funds (ETH or STRK) to act as the "Relayer" paying the gas fees.

```bash
export SPONSOR_ADDRESS=0xYourWalletAddress
export SPONSOR_PRIVATE_KEY=0xYourPrivateKey
export STARKNET_RPC_URL=[https://starknet-sepolia.public.blastapi.io/rpc/v0_7](https://starknet-sepolia.public.blastapi.io/rpc/v0_7)

```

### 3. Run Claim

Copy the command generated by the **StealthFlow Dashboard** (after scanning your funds) and run it:

```bash
python3 scripts/gasless_claim.py --stealth-priv <STEALTH_KEY> --to <RECIPIENT>

```



---

## ğŸ› ï¸ Technology Stack

* **Network:** Starknet Sepolia (Layer 2 Validity Rollup)
* **Smart Contracts:** Cairo 2.x, Scarb
* **Frontend:** Next.js 16 (App Router), TypeScript, Tailwind CSS
* **Cryptography:**
* `Garaga`: For optimized on-chain `secp256k1` signature verification.
* `starknet.js`: For off-chain key derivation and interaction.
* `noble-curves`: For client-side elliptic curve math.



---

## ğŸ“¦ Project Structure

```
StealthFlow/
â”œâ”€â”€ frontend/             # Next.js Web Application
â”‚   â”œâ”€â”€ src/components/   # Privacy Scanner & Crypto Logic
â”‚   â””â”€â”€ src/app/          # Dashboard & UI
â”œâ”€â”€ src/                  # Cairo Smart Contracts
â”‚   â”œâ”€â”€ contracts/        # Registry, StealthAccount, & Paymaster logic
â”‚   â””â”€â”€ lib/              # Garaga integration modules
â”œâ”€â”€ scripts/              # Python CLI for Relay/Claiming operations
â””â”€â”€ Scarb.toml            # Starknet Project Configuration

```

---

## ğŸš¦ Getting Started (Local Dev)

### Prerequisites

* [Node.js](https://nodejs.org/) (v18+)
* [Scarb](https://docs.swmansion.com/scarb/) (Cairo Package Manager)
* [Python 3.10+](https://www.python.org/) (For CLI scripts)

### 1. Smart Contracts

Compile the Cairo contracts:

```bash
scarb build

```

### 2. Frontend

Navigate to the frontend directory and install dependencies:

```bash
cd frontend
npm install
npm run dev

```

Open [http://localhost:3000](https://www.google.com/search?q=http://localhost:3000) to launch the DApp.

---

## ğŸ“– How It Works

1. **Registration**: User generates a **Stealth Meta-Address** (Spend PubKey + View PubKey) and shares it publicly.
2. **Sending**: Sender uses the Meta-Address to derive a unique **Stealth Address** and sends funds via the `StealthRegistry`.
3. **Scanning**: The receiver's client scans `StealthAnnouncement` events locally. It uses the `View Key` to identify incoming payments.
4. **Claiming (The Atomic Flow)**:
* Receiver generates a transaction signature off-chain.
* Receiver passes this signature to a Relayer (or executes via CLI).
* The `StealthAccount` contract verifies the signature using **Garaga**.
* **Success:** Funds are moved to the recipient, and the Relayer is reimbursed for gasâ€”all in one atomic transaction.



---

## ğŸ“„ License

MIT License. Created for the **DoraHacks RE{DEFINE} Hackathon**.